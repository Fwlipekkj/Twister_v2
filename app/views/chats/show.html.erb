<%= turbo_stream_from @chat %>

<div class="card card-bordered">
  <div class="card-header">
    <h4 class="card-title"><strong><%= participant(@chat).name %></strong></h4> <a class="btn btn-xs btn-secondary" href="#" data-abc="true">Let's Chat App</a>
  </div>

  <div class="ps-container ps-theme-default ps-active-y" style="overflow-y: scroll !important; height:55vh !important;"
       id="messages"
       data-controller='message-list'
       data-action='resize@window->message-list#scrollToBottom'>

    <%= render partial: 'messages/message', collection: @messages, cached: true %>

    <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 0px;">
      <div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div>
    </div>
    <div class="ps-scrollbar-y-rail" style="top: 0px; height: 0px; right: 2px;">
      <div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 2px;"></div>
    </div>
  </div>

  <div class="publisher bt-1 border-light">
    <img class="avatar avatar-xs" src="https://img.icons8.com/color/36/000000/administrator-male.png" alt="...">

    <%= turbo_frame_tag @new_message, class: 'w-100 px-3 pb-3 pt-2' do %>
      <%= render 'messages/form', message: @new_message %>
    <% end %>

  </div>
</div>